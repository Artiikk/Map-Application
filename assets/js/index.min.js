"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(t){var o={};function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"===_typeof(n)&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s="./app/js/main.js")}({"./app/js/main.js":function appJsMainJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_header__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/header */ "./app/js/modules/header.js");\n/* harmony import */ var _modules_body__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/body */ "./app/js/modules/body.js");\n/* harmony import */ var _modules_sort__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/sort */ "./app/js/modules/sort.js");\n/* harmony import */ var _modules_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/map */ "./app/js/modules/map.js");\n/* harmony import */ var _modules_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/tooltip */ "./app/js/modules/tooltip.js");\n\n\n\n\n\n\nfetch(\'./assets/establishment-data.json\')\n  .then(resolve => resolve.json())\n  .then(result => mainTable(result));\n\n(function searchListener () {\n  const inputField = document.getElementById(\'input-field\');\n  inputField.addEventListener(\'input\', searchFunc);\n}());\n\nfunction searchFunc () {\n  const filter = document.getElementById(\'input-field\').value.toUpperCase();\n  const trs = document.querySelectorAll(\'#parsed-table tr:not(.header)\');\n\n  trs.forEach(tr => (tr.style.display = [...tr.children].find(td =>\n    td.innerHTML.toUpperCase().includes(filter)) ? \'\' : \'none\'));\n}\n\n\nfunction mainTable (jsonFormat) {\n  Object(_modules_header__WEBPACK_IMPORTED_MODULE_0__["tableHeader"])();\n  Object(_modules_header__WEBPACK_IMPORTED_MODULE_0__["headerListener"])();\n\n  Object(_modules_body__WEBPACK_IMPORTED_MODULE_1__["tableBody"])(jsonFormat);\n  _modules_sort__WEBPACK_IMPORTED_MODULE_2__["SORT_METHODS"].default();\n\n  Object(_modules_tooltip__WEBPACK_IMPORTED_MODULE_4__["overTipListener"])();\n  Object(_modules_tooltip__WEBPACK_IMPORTED_MODULE_4__["outTipListener"])();\n}\n\n\n//# sourceURL=webpack:///./app/js/main.js?')},"./app/js/modules/body.js":function appJsModulesBodyJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"placeInfo\", function() { return placeInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tableBody\", function() { return tableBody; });\nconst placeInfo = {};\n\nfunction tableBody (parsedJSON) {\n  const fragment = document.createDocumentFragment();\n  const table = document.getElementById('parsed-table');\n\n  for (let i = 0; i < parsedJSON.length; i++) {\n    const {\n      urls,\n      title,\n      location: {\n        longitude,\n        latitude,\n        city,\n        adress,\n        zipcode,\n      },\n      dates: {\n        startdate,\n      },\n      details: {\n        en: {\n          shortdescription,\n          calendarsummary,\n        },\n      },\n    } = parsedJSON[i];\n\n    const long = Number(longitude.replace(',', '.'));\n    const lat = Number(latitude.replace(',', '.'));\n\n    const BODY_DATA = [{\n      size: 'table-row-xl',\n      title: `<a href=\"${urls}\" target=\"_blank\">${title}</a>`\n    }, {\n      size: 'table-row-md',\n      title: `${city}`\n    }, {\n      size: 'table-row-lg',\n      title: `${startdate}`\n    }, {\n      size: 'table-row-xs',\n      title: `${zipcode}`\n    }];\n\n    let html = '';\n    BODY_DATA.forEach(row => {\n      html += `<td class=\"${row.size}\">${row.title}</td>`.trim();\n    });\n\n    const tr = document.createElement('tr');\n    tr.setAttribute('id', i);\n    const id = tr.getAttribute('id');\n    placeInfo[id] = [shortdescription, adress, calendarsummary, long, lat];\n\n    tr.insertAdjacentHTML('afterbegin', html);\n    fragment.append(tr);\n  }\n\n  table.append(fragment);\n  dateStruct();\n}\n\nfunction dateStruct () {\n  const table = document.getElementById('parsed-table');\n  const tableRows = [...table.querySelectorAll('tr:not(.header)')];\n  const options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  };\n\n  for (let i = 0; i < tableRows.length; i++) {\n    const date = tableRows[i].children[2].textContent.split('-');\n\n    const elemDate = date[2];\n    date[2] = date[0];\n    date[0] = elemDate;\n    date.join(',');\n\n    tableRows[i].children[2].textContent = date;\n    const parsedDate = Date.parse(tableRows[i].children[2].textContent);\n\n    tableRows[i].children[2].textContent = isNaN(parsedDate)\n      ? 'No information'\n      : new Date(parsedDate).toLocaleString('en-US', options);\n  }\n}\n\n\n//# sourceURL=webpack:///./app/js/modules/body.js?")},"./app/js/modules/header.js":function appJsModulesHeaderJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tableHeader\", function() { return tableHeader; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"headerListener\", function() { return headerListener; });\n/* harmony import */ var _sort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sort */ \"./app/js/modules/sort.js\");\n\n\nconst HEADER_DATA = [\n  {\n    title: 'Title',\n    sortType: 'title',\n    size: 'table-row-xl',\n  },\n  {\n    title: 'City',\n    sortType: 'city',\n    size: 'table-row-md',\n  },\n  {\n    title: 'Establishment',\n    sortType: 'date',\n    size: 'table-row-lg',\n  },\n  {\n    title: 'Index',\n    sortType: 'number',\n    size: 'table-row-xs',\n  },\n];\n\nfunction tableHeader() {\n  const parsedTable = document.getElementById('parsed-table');\n  const trHeader = document.createElement('tr');\n  trHeader.className = 'header';\n  let html = '';\n\n  HEADER_DATA.forEach(row => {\n    html += `\n      <th class=\"${row.size}\">\n        <input id=\"${row.sortType}\"type=\"checkbox\">\n        <label for=\"${row.sortType}\">${row.title}</label>\n      </th>\n    `.trim();\n  });\n\n  trHeader.insertAdjacentHTML('afterbegin', html);\n  parsedTable.prepend(trHeader);\n}\n\nfunction headerListener() {\n  const trHeader = document.querySelector('.header');\n  trHeader.addEventListener('click', headerStruct);\n}\n\nfunction headerStruct({ target }) {\n  target.checked ? _sort__WEBPACK_IMPORTED_MODULE_0__[\"SORT_METHODS\"][target.id]() : _sort__WEBPACK_IMPORTED_MODULE_0__[\"SORT_METHODS\"].default();\n}\n\n\n//# sourceURL=webpack:///./app/js/modules/header.js?")},"./app/js/modules/map.js":function appJsModulesMapJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mapListener\", function() { return mapListener; });\n/* harmony import */ var _body__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./body */ \"./app/js/modules/body.js\");\n\n\nconst mymap = L.map('mapid').setView([52.370216, 4.895168], 13);\nlet marker;\n\n(function layer () {\n  L.tileLayer(\n    'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',\n    {\n      attribution:\n        \"Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, Imagery Â© <a href='https://www.mapbox.com/'>Mapbox</a>\",\n      maxZoom: 18,\n      id: 'mapbox.streets',\n      accessToken:\n        'pk.eyJ1IjoiYXJ0aWlrazIiLCJhIjoiY2p5NGNnN3dvMTVlbjNjbXF6YndnY3dpdyJ9.fyu90Ocs8N7dcZchFop_Ow',\n    },\n  ).addTo(mymap);\n}());\n\nconst mapListener = (() => {\n  const parsedTable = document.getElementById('parsed-table');\n  parsedTable.addEventListener('click', event => mapStruct(event));\n})();\n\nfunction mapStruct ({ target }) {\n  try {\n    while (target !== this) {\n      const id = target.getAttribute('id');\n      var information = _body__WEBPACK_IMPORTED_MODULE_0__[\"placeInfo\"][id];\n\n      if (information) break;\n      target = target.parentNode;\n    }\n\n    if (marker) marker.remove();\n    marker = L.marker([information[4], information[3]])\n      .addTo(mymap)\n      .bindPopup(target.firstElementChild.innerHTML)\n      .openPopup();\n    mymap.setView([information[4], information[3]], 13);\n  } catch (e) {\n    console.log('Doesn\\'t have an attribute \\'ID\\'');\n  }\n}\n\n\n//# sourceURL=webpack:///./app/js/modules/map.js?")},"./app/js/modules/sort.js":function appJsModulesSortJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SORT_METHODS\", function() { return SORT_METHODS; });\nconst table = document.getElementById('parsed-table');\n\nfunction sortBy(sort) {\n  const tableRows = [...document.querySelectorAll('tr:not(.header)')];\n\n  tableRows.sort(sort);\n\n  for (let i = 0; i < tableRows.length; i++) {\n    table.appendChild(tableRows[i]);\n  }\n}\n\nfunction getContent(a, b, i) {\n  const elemA = a.children[i].textContent;\n  const elemB = b.children[i].textContent;\n\n  return [elemA, elemB];\n}\n\nfunction titleSort(a, b) {\n  const [elemA, elemB] = getContent(a, b, 0);\n\n  return elemA.localeCompare(elemB);\n}\n\nfunction citySort(a, b) {\n  const [elemA, elemB] = getContent(a, b, 1);\n\n  return elemA.localeCompare(elemB);\n}\n\nfunction defaultSort(a, b) {\n  const [elemA, elemB] = getContent(a, b, 0);\n\n  return elemB.localeCompare(elemA);\n}\n\nfunction numberSort(a, b) {\n  const [elemA, elemB] = getContent(a, b, 3);\n\n  return parseInt(elemA) - parseInt(elemB);\n}\n\n\nfunction dateSort(a, b) {\n  const [elemA, elemB] = getContent(a, b, 2);\n\n  const parsedA = Date.parse(elemA);\n  const parsedB = Date.parse(elemB);\n\n  const dateA = isNaN(parsedA)\n    ? Date.now()\n    : new Date(a.children[2].textContent);\n  const dateB = isNaN(parsedB)\n    ? Date.now()\n    : new Date(b.children[2].textContent);\n\n  return dateA - dateB;\n}\n\nconst SORT_METHODS = {\n  title: () => sortBy(titleSort),\n  city: () => sortBy(citySort),\n  date: () => sortBy(dateSort),\n  number: () => sortBy(numberSort),\n  default: () => sortBy(defaultSort),\n};\n\n\n//# sourceURL=webpack:///./app/js/modules/sort.js?")},"./app/js/modules/tooltip.js":function appJsModulesTooltipJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"overTipListener\", function() { return overTipListener; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"outTipListener\", function() { return outTipListener; });\n/* harmony import */ var _body__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./body */ \"./app/js/modules/body.js\");\n\n\nlet showingTooltip;\n\nfunction overTipListener () {\n  const parsedTable = document.getElementById('parsed-table');\n  parsedTable.addEventListener('mouseover', event => overTipStruct(event));\n}\n\nfunction outTipListener () {\n  const parsedTable = document.getElementById('parsed-table');\n  parsedTable.addEventListener('mouseout', outTipStruct);\n}\n\nfunction overTipStruct ({ target }) {\n  try {\n    while (target !== this) {\n      const id = target.getAttribute('id');\n      var information = _body__WEBPACK_IMPORTED_MODULE_0__[\"placeInfo\"][id];\n\n      if (information) break;\n      target = target.parentNode;\n    }\n  } catch (e) {\n    console.log(\"Doesn't have an attribute 'ID'\");\n  }\n  if (!information) return;\n  showingTooltip = showTooltip(information, target);\n}\n\nfunction outTipStruct () {\n  if (showingTooltip) {\n    document.body.removeChild(showingTooltip);\n    showingTooltip = false;\n  }\n}\n\nfunction showTooltip (information, elem) {\n  const tooltipElem = document.createElement('div');\n  tooltipElem.style.height = `${292}px`;\n  const widthRegulation = document.documentElement.clientWidth;\n  tooltipElem.style.width = `${widthRegulation - elem.offsetWidth - 10}px`;\n\n  tooltipElem.className = 'tooltip';\n  tooltipElem.innerHTML += `INFORMATION: ${information[0]}`;\n  tooltipElem.innerHTML += `<br><br>ADDRESS: ${information[1]}`;\n  tooltipElem.innerHTML += `<br><br>SHEDULE: ${information[2]}`;\n\n  document.body.appendChild(tooltipElem);\n\n  const heightRegulation = document.documentElement.clientHeight / 6;\n  const elemCoordinates = elem.getBoundingClientRect();\n\n  const left = elemCoordinates.right + 2;\n  let { top } = elemCoordinates;\n\n  if (top < 0) top += elem.offsetHeight;\n  if (top > heightRegulation) top = heightRegulation;\n\n  tooltipElem.style.left = `${left}px`;\n  tooltipElem.style.top = `${top}px`;\n  tooltipElem.style.backgroundColor = '#FEECD0';\n\n  return tooltipElem;\n}\n\n\n//# sourceURL=webpack:///./app/js/modules/tooltip.js?")}});
//# sourceMappingURL=index.min.js.map
